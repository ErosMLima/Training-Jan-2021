<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="../img/title_img.png">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">

    <title>Admin Login</title>
    <link rel="stylesheet" href="../css/login.css">
  </head>
  <body>
    <main class="form-signin">
        <form id="myForm">
          <img class="mb-4 text-center" src="../img/logo@2x.png" alt="">
          <h1 class="h3 mb-3 fw-normal">Login</h1>
          <label for="inputEmail" class="visually-hidden">Email address</label>
          <input type="email" id="inputEmail" class="form-control" placeholder="Email address" required autofocus>
          <label for="inputPassword" class="visually-hidden">Password</label>
          <input type="password" id="inputPassword" class="form-control" placeholder="Password" required>
          <button class="w-100 btn btn-lg btn-primary" onclick="checklogin()" type="button">Sign in</button>
          <span style="color: red;" id="error"></span>
          <p class="mt-5 mb-3 text-muted text-center">&copy; 2021</p>
        </form>
      </main>
    </div>
    <script>
      function checklogin()
      {
        var email = document.getElementById('inputEmail').value;
        var pass = document.getElementById('inputPassword').value;
        error="";
        var a=true;
        if(email === "")
        {
          error += "Email id cannot be null<br>";
          document.getElementById('error').innerHTML = error;
          a =  false;
        }
        if(pass === "")
        {
          error += "Password cannot be null<br>";
          document.getElementById('error').innerHTML = error;
          a =  false;
        }
        if(a===true)
        {
          error ="";
          check(email,pass);
        }
      }
      
      async function check(email,pass)
      {
        let data = await fetch('read.json');
        let textdata = await data.json();
        if(textdata.email === email)
        {
          if(textdata.password === pass)
          {
           alert('success');
            // var datas = {'email':email,'pass':pass};

            // var getStorageData = JSON.parse(localStorage.getItem('data2')) || [] ;

          
            // getStorageData.push(datas);
            window.location.href="dashboard.html";

           
           
            // localStorage.setItem('data2', JSON.stringify(getStorageData));
          }
          else{
            error += "Password cannot be matched<br>";
          document.getElementById('error').innerHTML = error;
          }
        }
        else{
          error += "No User Found<br>";
          document.getElementById('error').innerHTML = error;
        }
      }
    </script>

    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
    <script src="../js/jquery.min.js"></script>
    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js" integrity="sha384-q2kxQ16AaE6UbzuKqyBE9/u/KzioAlnx2maXQHiDX9d4/zp8Ok3f+M7DPm+Ib6IU" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.min.js" integrity="sha384-pQQkAEnwaBkjpqZ8RU1fF1AKtTcHJwFl3pblpTlHXybJjHpMYo79HY3hIi4NKxyj" crossorigin="anonymous"></script>
    -->
  </body>
</html>