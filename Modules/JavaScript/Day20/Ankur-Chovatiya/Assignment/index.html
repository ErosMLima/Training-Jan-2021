<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">

    <title>Assignment</title>
  </head>
  <body>
    <!-- <h1>Hello, world!</h1> -->

<div class="container my-5">

    <table class="table  table-striped">
        <thead class="table-dark text-center"> 
            <td>ProductId</td>
            <td>ProductName</td>
            <td>Price</td>
            <td>Quantity</td>
            <td>Cart</td>
        </thead>
        <tbody>
            <tr class="text-center">
                <td>1</td>
                <td>Cheese</td>
                <td>100</td>
                <td><input type="number" id="cheese" class=""></td>
                <td><button class="btn btn-light" id="btn1">Add to Cart</button></td>
            </tr>
            <tr class="text-center">
                <td>2</td>
                <td>Pen</td>
                <td>150</td>
                <td><input type="number" id="pen" class=""></td>
                <td><button class="btn btn-light" id="btn2">Add to Cart</button></td>
            </tr>
            <tr class="text-center">
                <td>3</td>
                <td>Butter</td>
                <td>100</td>
                <td><input type="number" id="butter" class=""></td>
                <td><button class="btn btn-light" id="btn3">Add to Cart</button></td>
            </tr>
            <tr class="text-center">
                <td>4</td>
                <td>pencil</td>
                <td>10</td>
                <td><input type="number" id="pencil" class=""></td>
                <td><button class="btn btn-light" id="btn4">Add to Cart</button></td>
            </tr>

        </tbody>
    </table>

    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal" id="MainBtn"  >View Cart Summary</button>
</div>


  <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            
        <p id="item"></p>

        </div>
        <div class="modal-footer">
            <p id="total" class="lead"></p>
          <button type="button" id="clear" class="btn btn-secondary" data-bs-dismiss="modal">Clear Cart</button>
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Do Payment</button>
        </div>
      </div>
    </div>
  </div>



    <!-- Optional JavaScript; choose one of the two! -->

  <script>

    let data;
    fetch("data2.json")
    .then(response=>{
        return response.text();
    }).then(txt =>{
        data = txt;
        // console.log(data);   
    })

    


        document.getElementById("btn1").onclick = function(){
            let item1 = document.getElementById("cheese").value;
            
            if(typeof(item1) != "string"){
            localStorage.setItem("cheese", item1);
            }
            else{
              localStorage.setItem("cheese", item1);
            }
        }
        document.getElementById("btn2").onclick = function(){
            let item1 = document.getElementById("pen").value;

            if(typeof(item1) != "string"){
            localStorage.setItem("pen", item1);
            }
            else{
              localStorage.setItem("pen", item1);
            }
        }
        document.getElementById("btn3").onclick = function(){
            let item1 = document.getElementById("butter").value;

            if(typeof(item1) != "string"){
            localStorage.setItem("butter", item1);
            }
            else{
              localStorage.setItem("butter", item1);
            }
        }
        document.getElementById("btn4").onclick = function(){
            // console.log("btn4 clicked");
            window.location.reload();
            let item1 = document.getElementById("pencil").value;
            if(typeof(item1) != "string"){
            localStorage.setItem("pencil", item1);
            }
            else{
              localStorage.setItem("pencil", item1);
            }
        }

        // document.getElementById("MainBtn").reload();
        let list = ["cheese","pen","butter","pencil"]
        
        let totalPrice = 0;
        for(i in list){
           let items = localStorage.getItem(list[i]);
            // console.log(items);
            let see = document.getElementById("item");
            // console.log(see);
            see.innerHTML += `${list[i]} :   ${items} <br>`;

            if(list[i] == "cheese" ){
                // console.log("hi");
                totalPrice += 100*items;
            }
            else if(list[i] == "pen"){
                totalPrice += 150*items;
            }
            else if(list[i] == "butter"){
                totalPrice += 100*items;
            }
            else{
                totalPrice += 10*items
            }
            
        }
        // console.log(totalPrice);
        document.getElementById("total").innerHTML = ` Cart total is : ${totalPrice}`;

        document.getElementById("clear").onclick = function(){
          // console.log("bit");
          for(i in list){
            localStorage.removeItem(list[i]); 
          } 
        }

  </script>


    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.6.0/dist/umd/popper.min.js" integrity="sha384-KsvD1yqQ1/1+IA7gi3P0tyJcT3vR+NdBTt13hSJ2lnve8agRGXTTyNaBYmCR/Nwi" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.min.js" integrity="sha384-nsg8ua9HAw1y0W1btsyWgBklPnCUAFLuTMS2G72MMONqmOymq585AcH49TLBQObG" crossorigin="anonymous"></script>
    -->
  </body>
</html>