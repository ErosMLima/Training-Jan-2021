<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <title>JS Assignment</title>
</head>
<body>
    <div class="container m-5">
        <h2 class="text-center">Driving Licence Eligibility Check</h2>
        <p class="text-center lead">*Candidate must be minimum 18 years old</p><hr>
        <form action="practice1.html" class="form">
            <div class=" form-group row">
                <label for="date" class="col-4 text-right pt-3">Birth Date <mark>('MM-DD-YYYY')</mark>:</label>
                <input type="text" class="form-control m-2 col" placeholder="e.g. 01-01-1960" id="date">
            </div>
            <button class="btn btn-outline-dark mb-3 text-center" onclick="return checkDate()" type="submit">Submit</button>
        </form><br>
    </div>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

    <script>
        function checkDate(){
            var date = document.getElementById('date').value.trim();
            if(date == "")
            {
                alert('Please insert a date');
                document.getElementById('date').value="";
                return false;
            }
            var dateComponents = date.split('-');

            if(dateComponents.length != 3 || dateComponents[0].length != 2 || dateComponents[1].length != 2 || dateComponents[2].length != 4){
                alert('plz use valid format');
                document.getElementById('date').value="";
                return false;
            }

            var year = dateComponents[2];
            if(parseInt(year) < 1950 || parseInt(year) > (new Date()).getFullYear() || isNaN(parseInt(year)))
            {
                alert('invalid year!');
                document.getElementById('date').value="";
                return false;
            }

            var month = dateComponents[0];
            if(parseInt(month) < 1 || parseInt(month) > 12 || isNaN(parseInt(month)))
            {
                alert('invalid month!');
                document.getElementById('date').value="";
                return false;
            }

            var daysCount = new Date(year, month, 0).getDate(); // month is 0 indexed, date 0 will give last date of previous month
            var day = dateComponents[1];

            date = new Date(year, month-1, day);
            var currentDate = new Date();

            if(parseInt(day) < 1 || parseInt(day) > daysCount || isNaN(parseInt(day)) || date > currentDate)
            {
                alert('invalid date!');
                document.getElementById('date').value="";
                return false;
            }

            var diffInYears = (currentDate - date)/(3600000*24*365);
            console.log(diffInYears);
            if(diffInYears >= 18){
                alert('User is eligible to apply for driving licence.');
                return true;
            }
            else
            {
                alert('User is not eligible to apply for driving licence.');
                return false;
            }
        }
    </script>
</body>
</html>